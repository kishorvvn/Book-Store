@model BookManagements.ViewModels.HomeDetailsViewModel

@{

    ViewBag.Title = "Book Details";
    var photoPath = "~/images/" + (Model.Book.PhotoPath ?? "noImage.png");
}

<h4>Details</h4>


<div class="card col-sm-8 mx-auto d-block">
    <div class="card m-1">
        <div class="card-header">
            <dl class="row">
                <dt class="col-sm-4">
                    @Html.DisplayNameFor(model => model.Book.Title)
                </dt>
                <dd class="col-sm-8">
                    <h3> @Html.DisplayFor(model => model.Book.Title)</h3>
                </dd>
            </dl>
        </div>
        <div class="row">
            <div class="col-sm-4">
                <img class="card-img img-thumbnail" src="@photoPath" style="height:190px; width:150px; margin-left:50px" asp-append-version="true" />
            </div>
            <div class="col-sm-8">
                <div class="card-body-right">
                    <dl>
                        <dt class="col-sm-5">
                            @Html.DisplayNameFor(model => model.Book.Author) :
                        </dt>
                        <dd class="col-sm-7">
                            @Html.DisplayFor(model => model.Book.Author)
                        </dd>
                        <dt class="col-sm-5">
                            @Html.DisplayNameFor(model => model.Book.ISBN) :
                        </dt>
                        <dd class="col-sm-7">
                            @Html.DisplayFor(model => model.Book.ISBN)
                        </dd>

                        <dt class="col-sm-5">
                            @Html.DisplayNameFor(model => model.Book.Price) :
                        </dt>
                        <dd class="col-sm-7">
                            $@Html.DisplayFor(model => model.Book.Price)
                        </dd>

                    </dl>
                </div>
            </div>
        </div>
        <div class="card-footer text-center">
            <a asp-controller="Home" asp-action="Edit" asp-route-id="@Model.Book.Id" class="btn btn-info float-left mr-1">Edit</a>
            <a asp-controller="Home" asp-action="Index" class="btn btn-info float-left">Back to List</a>
            <a asp-controller="Review" asp-action="Add" asp-route-id="@Model.Book.Id" class="btn btn-info float-right"> Write a review</a>
            <a asp-controller="Review" asp-action="List" asp-route-id="@Model.Book.Id" class="btn btn-info  mr-1 float-right"> Reviews</a>
        </div>
        @if (Model.Reviews != null && Model.Reviews.Count() > 0)
        {

            @if (Model.Book.Reviews != null)
            {
                <h5 class="ml-3"> Reviews available:  @Model.Book.Reviews.Count()</h5>
                <div class="row col-sm-8">
                    <div class="col-sm-6"><h5>Average rating: @Model.AvgRating.ToString("0.00")</h5></div>
                    
                    <div class="col-sm-6 small">
                        <div class="star-ratings-sprite"><span style="@Html.Raw("width:" + (Model.AvgRating * 20) + "%;")" class="star-ratings-sprite-rating"></span></div>
                        <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>


                    </div>
                    </div>




            }
            else
            {
                <h5> No reviews available</h5>
            }
        }
    </div>
</div>

<!--


<h4>Reviews about this book....</h4>
<div class="card col-sm-8 mx-auto d-block">
    @if (Model.Reviews != null && Model.Reviews.Count() > 0)
    {

        @if (Model.Book.Reviews != null)
        {
            @foreach (var review in Model.Book.Reviews)
            {
                <div class="card ">
                    <div class="row ">
                        <div class="col-sm-7 ">
                            <p>@review.ReviewComments</p>
                            <p>@review.Rating</p>

                        </div>
                    </div>
                </div>
            }
        }
        else
        {
            <p>There are no reviews</p>
        }
    }
    else
    {
        <p>There are no reviews</p>
    }


</div>









<form enctype="multipart/form-data" asp-controller="Review" asp-action="Add"
      asp-route-id="@Model.Book.Id" method="post" class="mt-3 col-sm-8 mx-auto d-block">

    <div asp-validation-summary="All" class="text-danger d-block"></div>

    <h3>Write a review </h3>
    <div class="form-group row ">
        <label asp-for="Review.ReviewComments" class="col-sm-2 col-form-label font-weight-bold"></label>
        <input asp-for="Review.ReviewComments" class="col-sm-9" />

    </div>
    <div class="form-group row ">
        <label asp-for="Review.Rating" class="col-sm-2 col-form-label font-weight-bold"></label>
        <input asp-for="Review.Rating" class="col-sm-9">

    </div>

    <div class="form-group">
        <button class=" btn btn-success mx-auto d-block" type="submit">
            Submit
        </button>
    </div>

</form>
    -->
